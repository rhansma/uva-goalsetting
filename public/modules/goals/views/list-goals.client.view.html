<section data-ng-controller="GoalsController" data-ng-init="find()">

  <div class="row" data-ng-show="teacher">
    <div class="small-6 columns">
      <div class="switch small">
        <input id="editMode" data-ng-model="edit" type="checkbox">
        <label for="editMode">Edit mode</label>
        <span>Edit and rate goals</span>
      </div>
    </div>
    <div class="small-6 columns">
      <div data-ng-show="teacher && edit">
       <a class="tiny button right" data-ng-click="publish();">Publish!</a>
       <a class="tiny button right" data-ng-click="save();">Save</a>
     </div>
   </div>
 </div>

 <div class="row goals">
  <div class="small-12 medium-6 large-4 end columns" data-ng-repeat="goal in goals">
    <div class="goal panel">
      <a data-ng-href="#!/goals/{{goal._id}}">
        <h6>Goal</h6>
        <h4 data-ng-bind="goal.title"></h4>
        <small>
          Created on
          <span data-ng-bind="goal.created | amDateFormat:'MMMM Do YYYY'"></span>
          by
          <span data-ng-bind="goal.creator.displayName"></span>
        </small>
        <hr />
        <span data-ng-bind="goal.content"></span>
      </a>
      <!-- Teacher options -->
      <div class="row goals-edit" data-ng-show="teacher && edit">
        <div class="small-4 small-offset-5 columns">
          <input type="number" min="1" max="10" data-ng-model="goal.rating" />
        </div>
        <div class="small-3 columns" data-ng-show="teacher && edit">
          <a class="right" data-ng-click="remove(goal);"><i class="fa fa-trash-o"></i> Delete</a>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="small-12 columns">
    <div data-ng-if="goals.$resolved && !goals.length">
      No goals yet, why don't you <a href="/#!/goals/create">create one</a>?
    </div>
  </div>
</div>
</section>

<!-- User Goals -->
<section data-ng-controller="UserGoalsController" data-ng-init="find();findApproved()">
  <div class="row">
    <div class="small-12 columns">
      <a class="button" data-ng-href="#!/user/goals/statistics">Show statistics</a>
      <a class="medium button right" data-ng-href="/#!/goals/commit" data-ng-if="goals.length">Commit to goals</a>
    </div>
  </div>
  <div class="row">
    <h1>Committed goals</h1>
    <p data-ng-show="userGoals.length">Drag and drop goals on each other to group them.</p>
    <p data-ng-hide="userGoals.length">Not committed to goals yet.</p>
  </div>

  <div class="row goals">
    <div class="small-12 medium-6 large-4 end columns" data-ng-repeat="userGoal in userGoals">

      <div  class="noselect panel" ng-drag="true" ng-drag-data="$index" ng-drop="true" ng-drop-success="onDropComplete($data, $index);">
        <h4 data-ng-show="checkExpired(userGoal.goal.expires)" class="alert">Expired</h4>
        <h3 class="subheader" data-ng-bind="userGoal.goal.title"></h3>
        <a data-ng-href="#!/goals/grouped/{{userGoal.group}}"><small class="inline" data-ng-bind="userGoal.grouped | addPlus"></small></a>
        <p data-ng-bind="userGoal.goal.content"></p>
        <p><a data-ng-href="#!/goal/committed/{{userGoal._id}}" data-ng-hide="userGoal.group"><i class="fa fa-folder-open"></i></a></p>
      </div>

    </div>
  </div>

</section>
<style type="text/css">
  .noselect {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
</style>